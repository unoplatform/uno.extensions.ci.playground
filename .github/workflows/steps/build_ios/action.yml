name: Build Android
description: ""

inputs:
  package-id:
    description: 'Compiled Package ID'
    required: true
    default: 'release_Mobile'
  project-to-build:
    description: 'Relative path to .csproj file'
    required: true
    default: ''   
  artifact-retention-policy: 
    description: 'Number of days to keep the build artifacts'
    required: false
    default: '90'
  certificate: 
     description: "Base64 Certificate for signing .ipa package."
     required: true    
     default: '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'
  certificate-password: 
     description: "Certificate password."
     required: true      
     default: 'contoso'
  provisioning-profile: 
     description: "Base64 provisioning profile"
     required: true
     default: 'MIIvMwYJKoZIhvcNAQcCoIIvJDCCLyACAQExCzAJBgUrDgMCGgUAMIIfxgYJKoZIhvcNAQcBoIIftwSCH7M8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCI/Pgo8IURPQ1RZUEUgcGxpc3QgUFVCTElDICItLy9BcHBsZS8vRFREIFBMSVNUIDEuMC8vRU4iICJodHRwOi8vd3d3LmFwcGxlLmNvbS9EVERzL1Byb3BlcnR5TGlzdC0xLjAuZHRkIj4KPHBsaXN0IHZlcnNpb249IjEuMCI+CjxkaWN0PgoJPGtleT5BcHBJRE5hbWU8L2tleT4KCTxzdHJpbmc+RW52aW9zPC9zdHJpbmc+Cgk8a2V5PkFwcGxpY2F0aW9uSWRlbnRpZmllclByZWZpeDwva2V5PgoJPGFycmF5PgoJPHN0cmluZz5BQlhIOEpDTFMzPC9zdHJpbmc+Cgk8L2FycmF5PgoJPGtleT5DcmVhdGlvbkRhdGU8L2tleT4KCTxkYXRlPjIwMjItMDQtMDZUMTY6NDg6MzNaPC9kYXRlPgoJPGtleT5QbGF0Zm9ybTwva2V5PgoJPGFycmF5PgoJCQk8c3RyaW5nPmlPUzwvc3RyaW5nPgoJPC9hcnJheT4KCTxrZXk+SXNYY29kZU1hbmFnZWQ8L2tleT4KCTxmYWxzZS8+Cgk8a2V5PkRldmVsb3BlckNlcnRpZmljYXRlczwva2V5PgoJPGFycmF5PgoJCTxkYXRhPk1JSUZ1VENDQktHZ0F3SUJBZ0lRTmhNSE1UbEpOMGpWaTJUWmVKZUtmVEFOQmdrcWhraUc5dzBCQVFzRkFEQjFNVVF3UWdZRFZRUURERHRCY0hCc1pTQlhiM0pzWkhkcFpHVWdSR1YyWld4dmNHVnlJRkpsYkdGMGFXOXVjeUJEWlhKMGFXWnBZMkYwYVc5dUlFRjFkR2h2Y21sMGVURUxNQWtHQTFVRUN3d0NSek14RXpBUkJnTlZCQW9NQ2tGd2NHeGxJRWx1WXk0eEN6QUpCZ05WQkFZVEFsVlRNQjRYRFRJeU1EUXdOakUyTXpRMU1Wb1hEVEl6TURRd05qRTJNelExTUZvd2daUXhHakFZQmdvSmtpYUprL0lzWkFFQkRBcEJRbGhJT0VwRFRGTXpNVG93T0FZRFZRUUREREZwVUdodmJtVWdSR2x6ZEhKcFluVjBhVzl1T2lCTGQybHJJRVJ2Ykd4aGNpQk1URU1nS0VGQ1dFZzRTa05NVXpNcE1STXdFUVlEVlFRTERBcEJRbGhJT0VwRFRGTXpNUmd3RmdZRFZRUUtEQTlMZDJscklFUnZiR3hoY2lCTVRFTXhDekFKQmdOVkJBWVRBbFZUTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUFwS0U4VHFkM1ZPdUwrQlVGV1pwbjJWTjNQSlpJZFpHRE9pWWQ2bkMxMUE3L0tZNHZsVVlwWkNnRVZKVTBhREVZV2prRmhGdGpqdXFlYk90QTlSOUp0ZVpkT1hpUEVtV2RmTHg0ejAydG5hVWt1VVJhdlZKMTBtdndZSXIyY1crTWpEaVRzWUI0Y2tDZGRWeGsrQlhIVUxMREFWSWcyeVR6S201R3VUN1B3NGxsejlkUEJsc1BsRnhGRDdhL3ZQaHFKdHkzMzJObW5yMEd6RjdRVnlTZVVzY3plLzViMkFhM2hteEs4QjhPWTBIdVlUbDViQ0NNeVpId0J2MmRlcWUrMXZYWENVSDR3MHJmVnZzejRzK2xmTjZFUWpDdWhZd3hQN0lKczgyRWRweTdKQ0N1bWR3S3VtZWlTQUl5UlowWGw5cTBTTW1HSDJEdHY2citadzM1K3dJREFRQUJvNElDSXpDQ0FoOHdEQVlEVlIwVEFRSC9CQUl3QURBZkJnTlZIU01FR0RBV2dCUUovc0FWa1BtdlpBcVNFcmttS0dNTWwreW5zakJ3QmdnckJnRUZCUWNCQVFSa01HSXdMUVlJS3dZQkJRVUhNQUtHSVdoMGRIQTZMeTlqWlhKMGN5NWhjSEJzWlM1amIyMHZkM2RrY21jekxtUmxjakF4QmdnckJnRUZCUWN3QVlZbGFIUjBjRG92TDI5amMzQXVZWEJ3YkdVdVkyOXRMMjlqYzNBd015MTNkMlJ5WnpNd01qQ0NBUjRHQTFVZElBU0NBUlV3Z2dFUk1JSUJEUVlKS29aSWh2ZGpaQVVCTUlIL01JSERCZ2dyQmdFRkJRY0NBakNCdGd5QnMxSmxiR2xoYm1ObElHOXVJSFJvYVhNZ1kyVnlkR2xtYVdOaGRHVWdZbmtnWVc1NUlIQmhjblI1SUdGemMzVnRaWE1nWVdOalpYQjBZVzVqWlNCdlppQjBhR1VnZEdobGJpQmhjSEJzYVdOaFlteGxJSE4wWVc1a1lYSmtJSFJsY20xeklHRnVaQ0JqYjI1a2FYUnBiMjV6SUc5bUlIVnpaU3dnWTJWeWRHbG1hV05oZEdVZ2NHOXNhV041SUdGdVpDQmpaWEowYVdacFkyRjBhVzl1SUhCeVlXTjBhV05sSUhOMFlYUmxiV1Z1ZEhNdU1EY0dDQ3NHQVFVRkJ3SUJGaXRvZEhSd2N6b3ZMM2QzZHk1aGNIQnNaUzVqYjIwdlkyVnlkR2xtYVdOaGRHVmhkWFJvYjNKcGRIa3ZNQllHQTFVZEpRRUIvd1FNTUFvR0NDc0dBUVVGQndNRE1CMEdBMVVkRGdRV0JCVHIxWUFUaWgwMEROdnMvWm5MbjVVU1dmZ25EakFPQmdOVkhROEJBZjhFQkFNQ0I0QXdFd1lLS29aSWh2ZGpaQVlCQkFFQi93UUNCUUF3RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQU0vbVorU1dGUDhQMEFuNDNPamZ4M1ptNVdxMzAwaW4xbmlmUHgwTFdIR0NHQ0JsUHF1OExHVEg5c2p4aXJKbDVJWUZEYjA4a1NucUluOFIzZHYxL3IyUElldVZWYXk2YUhwUzFZVVNnQ1VyWFhaTEl6VlVCWVJJUXh1MFZCNkZOUUJnVzhTZVRBMGtadzFjVXZPeEx3R0FFNmpvMDhDRXFmaVhvK252MUpMbGdIRlAwUVROUk9yVndFNzc2am9OUnlxeGpkVi9pc2F1cW9Td0VFa1BTVTZXWi9kRWZKbVRlZTAzK2hSUXRtYVpabVkrNnVZbTMwVVZMdDJHWFlOYjNQSHRaZzdvU29vWHd4R3VxMFFTZmlzNERMNXNYVmZmaVhzNmZESm53WFVtY2IyRGtmTFhLNndEcXBMYytzcFQ1dmQ4MDNnbm1SMUJHdWpneWdOOUtSND08L2RhdGE+Cgk8L2FycmF5PgoKCTxrZXk+REVSLUVuY29kZWQtUHJvZmlsZTwva2V5PgoJPGRhdGE+TUlJTlRBWUpLb1pJaHZjTkFRY0NvSUlOUFRDQ0RUa0NBUUV4RHpBTkJnbGdoa2dCWlFNRUFnRUZBRENDQXdZR0NTcUdTSWIzRFFFSEFhQ0NBdmNFZ2dMek1ZSUM3ekFNREFkV1pYSnphVzl1RWdFeE1CRU1DRkJzWVhSbWIzSnRNQVVNQTJsUFV6QVJEQXBVYVcxbFZHOU1hWFpsRWdNek5qUXdFd3dKUVhCd1NVUk9ZVzFsREFaRmJuWnBiM013RXd3T1NYTllZMjlrWlUxaGJtRm5aV1FCQVFBd0Znd0VUbUZ0WlF3T1JXNTJhVzl6VUhKdlpESXdNakl3R3d3SVZHVmhiVTVoYldVTUQwdDNhV3NnUkc5c2JHRnlJRXhNUXpBZERBeERjbVZoZEdsdmJrUmhkR1VYRFRJeU1EUXdOakUyTkRnek0xb3dIZ3dPVkdWaGJVbGtaVzUwYVdacFpYSXdEQXdLUVVKWVNEaEtRMHhUTXpBZkRBNUZlSEJwY21GMGFXOXVSR0YwWlJjTk1qTXdOREEyTVRZek5EVXdXakFnREJkUWNtOW1hV3hsUkdsemRISnBZblYwYVc5dVZIbHdaUXdGVTFSUFVrVXdLd3diUVhCd2JHbGpZWFJwYjI1SlpHVnVkR2xtYVdWeVVISmxabWw0TUF3TUNrRkNXRWc0U2tOTVV6TXdMQXdFVlZWSlJBd2tNVFEzWXpoaU1XUXRZVEJoWWkwME1XWmlMVGxqWW1ZdE1qRmhZbVF4TURFNFkyVXdNRHNNRlVSbGRtVnNiM0JsY2tObGNuUnBabWxqWVhSbGN6QWlCQ0N2aGUzSU0wem8yeUsrbHVLVUZ4RWpRUEFTV3VReVBLMzNJT3o0aHFlN3dEQ0NBVDRNREVWdWRHbDBiR1Z0Wlc1MGMzQ0NBU3dDQVFHd2dnRWxNRG9NRm1Gd2NHeHBZMkYwYVc5dUxXbGtaVzUwYVdacFpYSU1JRUZDV0VnNFNrTk1Vek11WTI5dExtdDNhV3RrYjJ4c1lYSXVaVzUyYVc5ek1CME1EMkZ3Y3kxbGJuWnBjbTl1YldWdWRBd0tjSEp2WkhWamRHbHZiakFZREJOaVpYUmhMWEpsY0c5eWRITXRZV04wYVhabEFRSC9NQ3NNSm1OdmJTNWhjSEJzWlM1a1pYWmxiRzl3WlhJdVlYTnpiMk5wWVhSbFpDMWtiMjFoYVc1ekRBRXFNREVNSTJOdmJTNWhjSEJzWlM1a1pYWmxiRzl3WlhJdWRHVmhiUzFwWkdWdWRHbG1hV1Z5REFwQlFsaElPRXBEVEZNek1CTU1EbWRsZEMxMFlYTnJMV0ZzYkc5M0FRRUFNRGtNRm10bGVXTm9ZV2x1TFdGalkyVnpjeTFuY205MWNITXdId3dNUVVKWVNEaEtRMHhUTXk0cURBOWpiMjB1WVhCd2JHVXVkRzlyWlc2Z2dnZzhNSUlDUXpDQ0FjbWdBd0lCQWdJSUxjWDhpTkxGUzVVd0NnWUlLb1pJemowRUF3TXdaekViTUJrR0ExVUVBd3dTUVhCd2JHVWdVbTl2ZENCRFFTQXRJRWN6TVNZd0pBWURWUVFMREIxQmNIQnNaU0JEWlhKMGFXWnBZMkYwYVc5dUlFRjFkR2h2Y21sMGVURVRNQkVHQTFVRUNnd0tRWEJ3YkdVZ1NXNWpMakVMTUFrR0ExVUVCaE1DVlZNd0hoY05NVFF3TkRNd01UZ3hPVEEyV2hjTk16a3dORE13TVRneE9UQTJXakJuTVJzd0dRWURWUVFEREJKQmNIQnNaU0JTYjI5MElFTkJJQzBnUnpNeEpqQWtCZ05WQkFzTUhVRndjR3hsSUVObGNuUnBabWxqWVhScGIyNGdRWFYwYUc5eWFYUjVNUk13RVFZRFZRUUtEQXBCY0hCc1pTQkpibU11TVFzd0NRWURWUVFHRXdKVlV6QjJNQkFHQnlxR1NNNDlBZ0VHQlN1QkJBQWlBMklBQkpqcEx6MUFjcVR0a3lKeWdSTWMzUkNWOGNXalRuSGNGQmJaRHVXbUJTcDNaSHRmVGpqVHV4eEV0WC8xSDdZeVlsM0o2WVJiVHpCUEVWb0EvVmhZREtYMUR5eE5CMGNUZGRxWGw1ZHZNVnp0SzUxN0lEdll1VlRaWHBta09sRUtNYU5DTUVBd0hRWURWUjBPQkJZRUZMdXczcUZZTTRpYXBJcVozcjY5NjYvYXl5U3JNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdEZ1lEVlIwUEFRSC9CQVFEQWdFR01Bb0dDQ3FHU000OUJBTURBMmdBTUdVQ01RQ0Q2Y0hFRmw0YVhUUVkyZTN2OUd3T0FFWkx1Tit5UmhIRkQvM21lb3locG12T3dnUFVuUFdUeG5TNGF0K3FJeFVDTUcxbWloREsxQTNVVDgyTlF6NjBpbU9sTTI3amJkb1h0MlFmeUZNbStZaGlkRGtMRjF2TFVhZ002QmdENTZLeUtEQ0NBdVl3Z2dKdG9BTUNBUUlDQ0RNTjd2aS9UR2d1TUFvR0NDcUdTTTQ5QkFNRE1HY3hHekFaQmdOVkJBTU1Fa0Z3Y0d4bElGSnZiM1FnUTBFZ0xTQkhNekVtTUNRR0ExVUVDd3dkUVhCd2JHVWdRMlZ5ZEdsbWFXTmhkR2x2YmlCQmRYUm9iM0pwZEhreEV6QVJCZ05WQkFvTUNrRndjR3hsSUVsdVl5NHhDekFKQmdOVkJBWVRBbFZUTUI0WERURTNNREl5TWpJeU1qTXlNbG9YRFRNeU1ESXhPREF3TURBd01Gb3djakVtTUNRR0ExVUVBd3dkUVhCd2JHVWdVM2x6ZEdWdElFbHVkR1ZuY21GMGFXOXVJRU5CSURReEpqQWtCZ05WQkFzTUhVRndjR3hsSUVObGNuUnBabWxqWVhScGIyNGdRWFYwYUc5eWFYUjVNUk13RVFZRFZRUUtEQXBCY0hCc1pTQkpibU11TVFzd0NRWURWUVFHRXdKVlV6QlpNQk1HQnlxR1NNNDlBZ0VHQ0NxR1NNNDlBd0VIQTBJQUJBWnJwRlp2Zlo4bjBjNDJqcEliVnMxVU5tUkt5WlJvbWZySklIN2k5VmdQM09KcTZ4bEhMeTd2TzZRQnRBRVRSSHhhSnEyZ25Da2xpdVhtQm05UGZGcWpnZmN3Z2ZRd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBZkJnTlZIU01FR0RBV2dCUzdzTjZoV0RPSW1xU0ttZDYrdmV1djJzc2txekJHQmdnckJnRUZCUWNCQVFRNk1EZ3dOZ1lJS3dZQkJRVUhNQUdHS21oMGRIQTZMeTl2WTNOd0xtRndjR3hsTG1OdmJTOXZZM053TURNdFlYQndiR1Z5YjI5MFkyRm5NekEzQmdOVkhSOEVNREF1TUN5Z0txQW9oaVpvZEhSd09pOHZZM0pzTG1Gd2NHeGxMbU52YlM5aGNIQnNaWEp2YjNSallXY3pMbU55YkRBZEJnTlZIUTRFRmdRVWVrZTZPSW9WSkVnaVJzMitqeG9rZXpRREtta3dEZ1lEVlIwUEFRSC9CQVFEQWdFR01CQUdDaXFHU0liM1kyUUdBaEVFQWdVQU1Bb0dDQ3FHU000OUJBTURBMmNBTUdRQ01CVU1xWTdHcjVacGE2ZWYzVnpVQTFsc3JsTFVZTWFMZHVDM3hhTHhDWHpnbXVOcnNlTjhNY1FuZXFlT2lmMnJkd0l3WVRNZzhTbi8rWWN5cmluSVpEMTJlMUdrMGdJdmRyNWdJcEh4MVRwMTNMVGl4aXFXL3NZSjNFcFAxU1R3L01xeU1JSURCekNDQXEyZ0F3SUJBZ0lJRDE0SVhKTnIwMEF3Q2dZSUtvWkl6ajBFQXdJd2NqRW1NQ1FHQTFVRUF3d2RRWEJ3YkdVZ1UzbHpkR1Z0SUVsdWRHVm5jbUYwYVc5dUlFTkJJRFF4SmpBa0JnTlZCQXNNSFVGd2NHeGxJRU5sY25ScFptbGpZWFJwYjI0Z1FYVjBhRzl5YVhSNU1STXdFUVlEVlFRS0RBcEJjSEJzWlNCSmJtTXVNUXN3Q1FZRFZRUUdFd0pWVXpBZUZ3MHlNVEEwTVRReU1UTXlOVEJhRncweU5UQTFNVE15TVRFMk1qVmFNRTR4S2pBb0JnTlZCQU1NSVZkWFJGSWdVSEp2ZG1semFXOXVhVzVuSUZCeWIyWnBiR1VnVTJsbmJtbHVaekVUTUJFR0ExVUVDZ3dLUVhCd2JHVWdTVzVqTGpFTE1Ba0dBMVVFQmhNQ1ZWTXdXVEFUQmdjcWhrak9QUUlCQmdncWhrak9QUU1CQndOQ0FBVGc3N3N4SFFBVkdxT29rYXFVTUdqQ3dMZzZCU2lLYlZCODYyVkNpR3BndWhRWTBBRysyNllIaFIyakJsMHExcW9zNVViZEZHRjkyMTJpeEFsSEl5d2FvNElCVHpDQ0FVc3dEQVlEVlIwVEFRSC9CQUl3QURBZkJnTlZIU01FR0RBV2dCUjZSN280aWhVa1NDSkd6YjZQR2lSN05BTXFhVEJCQmdnckJnRUZCUWNCQVFRMU1ETXdNUVlJS3dZQkJRVUhNQUdHSldoMGRIQTZMeTl2WTNOd0xtRndjR3hsTG1OdmJTOXZZM053TURNdFlYTnBZMkUwTURNd2daWUdBMVVkSUFTQmpqQ0JpekNCaUFZSktvWklodmRqWkFVQk1Ic3dlUVlJS3dZQkJRVUhBZ0l3YlF4clZHaHBjeUJqWlhKMGFXWnBZMkYwWlNCcGN5QjBieUJpWlNCMWMyVmtJR1Y0WTJ4MWMybDJaV3g1SUdadmNpQm1kVzVqZEdsdmJuTWdhVzUwWlhKdVlXd2dkRzhnUVhCd2JHVWdVSEp2WkhWamRITWdZVzVrTDI5eUlFRndjR3hsSUhCeWIyTmxjM05sY3k0d0hRWURWUjBPQkJZRUZPY3pEMjNybDEvakhiNlkrdDkwQm02bkRyS2NNQTRHQTFVZER3RUIvd1FFQXdJSGdEQVBCZ2txaGtpRzkyTmtEQk1FQWdVQU1Bb0dDQ3FHU000OUJBTUNBMGdBTUVVQ0lRRHpqMzg3WHZJWHlRb0Z4RTJsc0kzU2p0dmhnc04wZGl2YVViUGRpSjJGOFFJZ0piWGdlMG8rbWl3YTNnNktVTjNMbkp3c2IySjgvYm82SENlbjJiUG52Wk14Z2dIWE1JSUIwd0lCQVRCK01ISXhKakFrQmdOVkJBTU1IVUZ3Y0d4bElGTjVjM1JsYlNCSmJuUmxaM0poZEdsdmJpQkRRU0EwTVNZd0pBWURWUVFMREIxQmNIQnNaU0JEWlhKMGFXWnBZMkYwYVc5dUlFRjFkR2h2Y21sMGVURVRNQkVHQTFVRUNnd0tRWEJ3YkdVZ1NXNWpMakVMTUFrR0ExVUVCaE1DVlZNQ0NBOWVDRnlUYTlOQU1BMEdDV0NHU0FGbEF3UUNBUVVBb0lIcE1CZ0dDU3FHU0liM0RRRUpBekVMQmdrcWhraUc5dzBCQndFd0hBWUpLb1pJaHZjTkFRa0ZNUThYRFRJeU1EUXdOakUyTkRnek0xb3dLZ1lKS29aSWh2Y05BUWswTVIwd0d6QU5CZ2xnaGtnQlpRTUVBZ0VGQUtFS0JnZ3Foa2pPUFFRREFqQXZCZ2txaGtpRzl3MEJDUVF4SWdRZzRSMElnYmVkWHdhS0Z2WEFOSGhvcnRZaGVPeFREWjA4QVZ4bGo3WXN3Qm93VWdZSktvWklodmNOQVFrUE1VVXdRekFLQmdncWhraUc5dzBEQnpBT0JnZ3Foa2lHOXcwREFnSUNBSUF3RFFZSUtvWklodmNOQXdJQ0FVQXdCd1lGS3c0REFnY3dEUVlJS29aSWh2Y05Bd0lDQVNnd0NnWUlLb1pJemowRUF3SUVSekJGQWlFQTNCbzY2aVM5YmY2Qy96dWVNZFZzR1ZLQnBXbElGcTFsemhid1I2MlAxZzRDSUhHYUJYVi8zeWRwU1A2VnRWZm5YWUo4NkpJQXhtOC81c21UZXJvalIvazI8L2RhdGE+CgkJCQkJCQkJCQkJCQoJPGtleT5FbnRpdGxlbWVudHM8L2tleT4KCTxkaWN0PgoJCTxrZXk+YmV0YS1yZXBvcnRzLWFjdGl2ZTwva2V5PgoJCTx0cnVlLz4KCQkJCQoJCQkJPGtleT5hcHMtZW52aXJvbm1lbnQ8L2tleT4KCQk8c3RyaW5nPnByb2R1Y3Rpb248L3N0cmluZz4KCQkJCQoJCQkJPGtleT5jb20uYXBwbGUuZGV2ZWxvcGVyLmFzc29jaWF0ZWQtZG9tYWluczwva2V5PgoJCTxzdHJpbmc+Kjwvc3RyaW5nPgoJCQkJCgkJCQk8a2V5PmFwcGxpY2F0aW9uLWlkZW50aWZpZXI8L2tleT4KCQk8c3RyaW5nPkFCWEg4SkNMUzMuY29tLmt3aWtkb2xsYXIuZW52aW9zPC9zdHJpbmc+CgkJCQkKCQkJCTxrZXk+a2V5Y2hhaW4tYWNjZXNzLWdyb3Vwczwva2V5PgoJCTxhcnJheT4KCQkJCTxzdHJpbmc+QUJYSDhKQ0xTMy4qPC9zdHJpbmc+CgkJCQk8c3RyaW5nPmNvbS5hcHBsZS50b2tlbjwvc3RyaW5nPgoJCTwvYXJyYXk+CgkJCQkKCQkJCTxrZXk+Z2V0LXRhc2stYWxsb3c8L2tleT4KCQk8ZmFsc2UvPgoJCQkJCgkJCQk8a2V5PmNvbS5hcHBsZS5kZXZlbG9wZXIudGVhbS1pZGVudGlmaWVyPC9rZXk+CgkJPHN0cmluZz5BQlhIOEpDTFMzPC9zdHJpbmc+CgoJPC9kaWN0PgoJPGtleT5FeHBpcmF0aW9uRGF0ZTwva2V5PgoJPGRhdGU+MjAyMy0wNC0wNlQxNjozNDo1MFo8L2RhdGU+Cgk8a2V5Pk5hbWU8L2tleT4KCTxzdHJpbmc+RW52aW9zUHJvZDIwMjI8L3N0cmluZz4KCTxrZXk+VGVhbUlkZW50aWZpZXI8L2tleT4KCTxhcnJheT4KCQk8c3RyaW5nPkFCWEg4SkNMUzM8L3N0cmluZz4KCTwvYXJyYXk+Cgk8a2V5PlRlYW1OYW1lPC9rZXk+Cgk8c3RyaW5nPkt3aWsgRG9sbGFyIExMQzwvc3RyaW5nPgoJPGtleT5UaW1lVG9MaXZlPC9rZXk+Cgk8aW50ZWdlcj4zNjQ8L2ludGVnZXI+Cgk8a2V5PlVVSUQ8L2tleT4KCTxzdHJpbmc+MTQ3YzhiMWQtYTBhYi00MWZiLTljYmYtMjFh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'
  keychain-password: 
     description: "New keychain password. This can be a random string value"
     required: false
     default: 'KEYCHAIN_PASSWORD'      
  publish-artifacts: 
     description: "If true, compilation artifacts will be published and put under Job Summary section"
     required: false
     default: 'true' 

runs:
  using: "composite"
  steps:
    - name: Setup GitVersion
      uses: gittools/actions/gitversion/setup@v0.9.9
      with:
        versionSpec: '5.x'

    - name: GitVersion
      id: gitversion
      uses: gittools/actions/gitversion/execute@v0.9.9
      with:
        useConfigFile: true
        configFilePath: ./.github/workflows/config/gitversion.yml

    - name: Set XCode Version
      if: runner.os == 'macOS'
      shell: bash
      run: |
        sudo xcode-select -s "/Applications/Xcode_14.1.app"
        echo "MD_APPLE_SDK_ROOT=/Applications/Xcode_14.1.app" >> $GITHUB_ENV
        
    - name: Install the Apple certificate and provisioning profile
      shell: bash
      env:
        BUILD_CERTIFICATE_BASE64: ${{ inputs.certificate }}
        P12_PASSWORD: ${{ inputs.certificate-password }}
        BUILD_PROVISION_PROFILE_BASE64: ${{ inputs.provisioning-profile }}
        KEYCHAIN_PASSWORD: ${{ inputs.keychain-password }}
      run: |
          echo -n "create variables"
          CERTIFICATE_PATH=$RUNNER_TEMP/build_certificate.p12
          PP_PATH=$RUNNER_TEMP/build_pp.mobileprovision
          KEYCHAIN_PATH=$RUNNER_TEMP/app-signing.keychain-db

          echo -n "import certificate and provisioning profile from secrets"
          echo -n "$BUILD_CERTIFICATE_BASE64" | base64 --decode -o $CERTIFICATE_PATH
          echo -n "$BUILD_PROVISION_PROFILE_BASE64" | base64 --decode -o $PP_PATH

          echo -n "create temporary keychain"
          security create-keychain -p "$KEYCHAIN_PASSWORD" $KEYCHAIN_PATH
          security set-keychain-settings -lut 21600 $KEYCHAIN_PATH
          security unlock-keychain -p "$KEYCHAIN_PASSWORD" $KEYCHAIN_PATH

          echo -n "import certificate to keychain"
          security import $CERTIFICATE_PATH -P "$P12_PASSWORD" -A -t cert -f pkcs12 -k $KEYCHAIN_PATH
          security list-keychain -d user -s $KEYCHAIN_PATH

          echo -n "apply provisioning profile"
          mkdir -p ~/Library/MobileDevice/Provisioning\ Profiles
          cp $PP_PATH ~/Library/MobileDevice/Provisioning\ Profiles
          
    # Create the app package by building and packaging the project
    - name: Build and create package
      shell: pwsh
      run: |
        dotnet build  -c Debug -p:TargetFramework=net6.0-ios /p:packageApp=false /p:buildForSimulator=true  -o .\bin\Release${{ inputs.package-id }}\ ${{ inputs.project-to-build }} 

        $finalPackageFolder = ".\artifacts${{ inputs.package-id }}"
        Write-Host "Creating package folder: $finalPackageFolder"
        New-Item -ItemType Directory -Force -Path $finalPackageFolder

        if ('true' -eq '${{ inputs.publish-artifacts }}') {
          Write-Host "Compressing final package"
          Copy-Item -Path '.\bin\Release${{ inputs.package-id }}\*' -Destination ".\" -recurse -Force  
        }

    - name: Upload Artifacts
      uses: actions/upload-artifact@v2
      with:
        name: "${{ inputs.package-id }}_${{ steps.gitversion.outputs.assemblySemVer }}" 
        path: .\artifacts${{ inputs.package-id }}
        retention-days: ${{ inputs.artifact-retention-policy }}